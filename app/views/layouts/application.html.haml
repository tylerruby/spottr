!!!
%html
  %head
    %title Spot
    = stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true
    = javascript_include_tag 'application', 'data-turbolinks-track' => true
    %script{:src => "//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry", :type => "text/javascript"}
    %script{:src => "//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js", :type => "text/javascript"}
    %script{:src => "//google-maps-utility-library-v3.googlecode.com/svn/trunk/styledmarker/src/StyledMarker.js", :type => "text/javascript"}
    = csrf_meta_tags
  %body
    = render 'layouts/header'
    = yield
    - unless has_coordinates?
      :javascript
        if ("geolocation" in navigator) {
          navigator.geolocation.getCurrentPosition(function(position) {
            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;

            $.post('session_coordinates', { latitude: latitude, longitude: longitude }, function(){})
          });
        }
    = yield :scripts if content_for? :scripts
